{"ast":null,"code":"import _slicedToArray from\"/Users/royeshargal/MyProjects/Chapo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/royeshargal/MyProjects/Chapo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/royeshargal/MyProjects/Chapo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import\"./write.css\";import{useEffect,useState}from'react';import APIService from\"../APIService\";import httpClient from\"../../httpClient\";import React from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Write=function Write(props){useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return httpClient.get(\"//127.0.0.1:5000/@me\");case 3:resp=_context.sent;setUser(resp.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(\"Not Authenticated.\");case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}))();},[]);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),userid=_useState8[0],setUserid=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),tags=_useState10[0],setTags=_useState10[1];var insertPost=function insertPost(){APIService.InsertPost({title:title,content:content,userid:userid,tags:tags}).then(function(response){return props.insertedPost(response);}).catch(function(error){return console.log('error',error);});};var handleSubmit=function handleSubmit(event){event.preventDefault();insertPost();window.alert('Posted!');window.open(\"/home\",\"Posted!\");// setImg('')\nsetTitle('');setContent('');setTags('');};return/*#__PURE__*/_jsx(\"div\",{className:\"write\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"writeForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"p\",{className:\"writeFormGroup writeInputTitle\",children:\"CREATE:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"writeFormGroup\",children:/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",required:true,minLength:4,maxLength:50,placeholder:\"Title\",id:\"textInput\",value:title,className:\"writeInput titleBOX\",onChange:function onChange(e){return setTitle(e.target.value);},autoFocus:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"writeFormGroup \",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"writeInput content \",type:\"text\",required:true,minLength:5,maxLength:300,placeholder:\"What's this about ?\",onChange:function onChange(e){setContent(e.target.value);setUserid(user.id);},value:content})}),/*#__PURE__*/_jsx(\"div\",{className:\"writeFormGroup\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,maxLength:12,onChange:function onChange(e){setTags(e.target.value);},placeholder:\"Tags\",value:tags,className:\"writeInput titleBOX\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"writeFormGroup\",children:/*#__PURE__*/_jsx(\"button\",{className:\"writeSubmit btn-success\",children:\"POST\"})})]})});};export default Write;","map":{"version":3,"sources":["/Users/royeshargal/MyProjects/Chapo/client/src/components/Write/Write.js"],"names":["useEffect","useState","APIService","httpClient","React","Write","props","get","resp","setUser","data","console","log","user","title","setTitle","content","setContent","userid","setUserid","tags","setTags","insertPost","InsertPost","then","response","insertedPost","catch","error","handleSubmit","event","preventDefault","window","alert","open","e","target","value","id"],"mappings":"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","sourcesContent":["import \"./write.css\"\nimport {useEffect, useState} from 'react';\nimport APIService from \"../APIService\";\nimport httpClient from \"../../httpClient\";\nimport React from \"react\";\nconst Write = (props) => {\n\n    useEffect(()=>{\n        (async () => {\n            try {\n                const resp = await httpClient.get(\"//127.0.0.1:5000/@me\");\n                setUser(resp.data);\n            }\n            catch (e){\n                console.log(\"Not Authenticated.\")\n            }\n        })();\n    },[])\n\n    const [user,setUser] = useState( '')\n    const [title, setTitle] = useState('')\n     const [content, setContent] = useState('')\n    const [userid,setUserid] = useState('')\n    const [tags,setTags] = useState('')\n    const insertPost = () => {\n        APIService.InsertPost({title,content,userid,tags })\n            .then((response) => props.insertedPost(response))\n            .catch(error => console.log('error', error))\n    }\n\n    const handleSubmit= (event) =>{\n\n        event.preventDefault()\n        insertPost()\n        window.alert('Posted!')\n        window.open(\"/home\", \"Posted!\");\n        // setImg('')\n        setTitle('')\n        setContent('')\n        setTags('')\n\n\n    }\n    return (\n        <div className=\"write\">\n\n            <form className=\"writeForm\" onSubmit={handleSubmit} >\n                <p className=\"writeFormGroup writeInputTitle\">CREATE:</p>\n\n                <div className=\"writeFormGroup\">\n                    <textarea type=\"text\" required minLength={4} maxLength={50}\n                           placeholder=\"Title\"\n                           id=\"textInput\"\n                           value={title}\n                           className=\"writeInput titleBOX\"\n                           onChange={(e)=>setTitle(e.target.value)}\n\n                           autoFocus={true}/>\n\n                </div>\n\n                <div className=\"writeFormGroup \">\n                    <textarea className=\"writeInput content \" type=\"text\" required minLength={5} maxLength={300}\n                           placeholder=\"What's this about ?\"\n                           onChange={(e)=>{setContent(e.target.value);setUserid(user.id)}}\n                           value={content}\n                    />\n\n                </div>\n                <div className={\"writeFormGroup\"}>\n                    <input\n                        type=\"text\" required maxLength={12}\n                        onChange={(e)=>{setTags(e.target.value)}}\n                        placeholder=\"Tags\"\n                        value={tags}\n                        className={\"writeInput titleBOX\"}\n                    />\n                </div>\n\n\n\n                <div className=\"writeFormGroup\">\n\n                    <button className=\"writeSubmit btn-success\"\n                            >POST</button>\n                </div>\n            </form>\n        </div>\n    )\n}\nexport default Write;"]},"metadata":{},"sourceType":"module"}