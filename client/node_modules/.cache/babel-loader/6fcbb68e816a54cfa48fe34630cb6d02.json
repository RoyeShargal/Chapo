{"ast":null,"code":"import _regeneratorRuntime from\"/Users/royeshargal/MyProjects/Chapo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/royeshargal/MyProjects/Chapo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/royeshargal/MyProjects/Chapo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./post.css\";import React,{useEffect,useState}from\"react\";import httpClient from\"../../httpClient\";import{Link}from\"react-router-dom\";import*as http from\"http\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Post(_ref){var aSinglePost=_ref.aSinglePost;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var postID=aSinglePost.id;useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return httpClient.get(\"//127.0.0.1:5000/@me\");case 3:resp=_context.sent;setUser(resp.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(\"Not Authenticated.\");case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}))();},[]);var postId=aSinglePost.id;var arrayOfTags=aSinglePost.tags.split(' ');var deletePost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!window.confirm(\"Delete?\")){_context2.next=3;break;}_context2.next=3;return httpClient.post(\"//127.0.0.1:5000/deletepost\",{postId:postId});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function deletePost(){return _ref3.apply(this,arguments);};}();var userid;if(user!=null){userid=user.id;}else{userid=0;}var likePost=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return httpClient.post(\"//127.0.0.1:5000/likeapost\",{postId:postId,userid:userid});case 2:window.alert('Added to liked posts!');case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function likePost(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"post\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"postTitle\",children:aSinglePost.title}),/*#__PURE__*/_jsxs(\"span\",{className:\"postAuthor\",children:[\"Created by \",aSinglePost.authorName]}),/*#__PURE__*/_jsxs(\"p\",{className:\"postContent\",children:[aSinglePost.content,\" \"]}),arrayOfTags.map(function(tag){return/*#__PURE__*/_jsx(\"p\",{className:\"tags\",children:tag});}),/*#__PURE__*/_jsxs(\"p\",{className:\"postDate\",children:[aSinglePost.date,\" \"]}),user.email!=null?/*#__PURE__*/_jsx(\"i\",{className:\"far fa-heart heart \",onClick:likePost}):/*#__PURE__*/_jsx(\"p\",{})]})});}","map":{"version":3,"sources":["/Users/royeshargal/MyProjects/Chapo/client/src/components/Post/Post.jsx"],"names":["React","useEffect","useState","httpClient","Link","http","Post","aSinglePost","user","setUser","postID","id","get","resp","data","console","log","postId","arrayOfTags","tags","split","deletePost","window","confirm","post","userid","likePost","alert","title","authorName","content","map","tag","date","email"],"mappings":"geAAA,MAAO,YAAP,CACA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAOC,CAAAA,UAAP,KAAuB,kBAAvB,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,MAAO,GAAKC,CAAAA,IAAZ,KAAsB,MAAtB,C,wFACA,cAAe,SAASC,CAAAA,IAAT,MACf,IAD8BC,CAAAA,WAC9B,MAD8BA,WAC9B,CACI,cAAuBL,QAAQ,CAAE,EAAF,CAA/B,wCAAOM,IAAP,eAAYC,OAAZ,eAEA,GAAMC,CAAAA,MAAM,CAAGH,WAAW,CAACI,EAA3B,CAEAV,SAAS,CAAC,UAAI,CACV,wDAAC,kLAE0BE,CAAAA,UAAU,CAACS,GAAX,CAAe,sBAAf,CAF1B,QAEaC,IAFb,eAGOJ,OAAO,CAACI,IAAI,CAACC,IAAN,CAAP,CAHP,+EAMOC,OAAO,CAACC,GAAR,CAAY,oBAAZ,EANP,oEAAD,KASH,CAVQ,CAUP,EAVO,CAAT,CAYA,GAAIC,CAAAA,MAAM,CAAGV,WAAW,CAACI,EAAzB,CACA,GAAMO,CAAAA,WAAW,CAAGX,WAAW,CAACY,IAAZ,CAAiBC,KAAjB,CAAuB,GAAvB,CAApB,CAEA,GAAMC,CAAAA,UAAU,2FAAG,4IACXC,MAAM,CAACC,OAAP,CAAe,SAAf,CADW,iDAELpB,CAAAA,UAAU,CAACqB,IAAX,CAAgB,6BAAhB,CAA8C,CAChDP,MAAM,CAANA,MADgD,CAA9C,CAFK,yDAAH,kBAAVI,CAAAA,UAAU,2CAAhB,CASA,GAAII,CAAAA,MAAJ,CACA,GAAGjB,IAAI,EAAI,IAAX,CAAgB,CACfiB,MAAM,CAAGjB,IAAI,CAACG,EAAd,CAAiB,CADlB,IAEI,CACCc,MAAM,CAAC,CAAP,CACJ,CACD,GAAMC,CAAAA,QAAQ,2FAAG,+JACPvB,CAAAA,UAAU,CAACqB,IAAX,CAAgB,4BAAhB,CAA6C,CAC/CP,MAAM,CAANA,MAD+C,CAE/CQ,MAAM,CAANA,MAF+C,CAA7C,CADO,QAMbH,MAAM,CAACK,KAAP,CAAa,uBAAb,EANa,wDAAH,kBAARD,CAAAA,QAAQ,2CAAd,CASA,mBACI,YAAK,SAAS,CAAC,MAAf,uBACI,oCACI,aAAM,SAAS,CAAC,WAAhB,UAA8BnB,WAAW,CAACqB,KAA1C,EADJ,cAEI,cAAM,SAAS,CAAC,YAAhB,yBAAyCrB,WAAW,CAACsB,UAArD,GAFJ,cAGI,WAAG,SAAS,CAAE,aAAd,WAA8BtB,WAAW,CAACuB,OAA1C,OAHJ,CAIKZ,WAAW,CAACa,GAAZ,CAAgB,SAACC,GAAD,CAAS,CACtB,mBAAO,UAAG,SAAS,CAAE,MAAd,UAAuBA,GAAvB,EAAP,CACH,CAFA,CAJL,cAOI,WAAG,SAAS,CAAE,UAAd,WAA2BzB,WAAW,CAAC0B,IAAvC,OAPJ,CAQKzB,IAAI,CAAC0B,KAAL,EAAc,IAAd,cACG,UAAG,SAAS,CAAC,qBAAb,CAAmC,OAAO,CAAER,QAA5C,EADH,cAEE,YAVP,GADJ,EADJ,CAuBH","sourcesContent":["import \"./post.css\"\nimport React, {useEffect, useState} from \"react\";\nimport httpClient from \"../../httpClient\";\nimport {Link} from \"react-router-dom\";\nimport * as http from \"http\";\nexport default function Post({aSinglePost})\n{\n    const [user,setUser] = useState( '')\n\n    const postID = aSinglePost.id\n\n    useEffect(()=>{\n        (async () => {\n            try {\n                const resp = await httpClient.get(\"//127.0.0.1:5000/@me\");\n                setUser(resp.data);\n            }\n            catch (e){\n                console.log(\"Not Authenticated.\")\n            }\n        })();\n    },[])\n\n    let postId = aSinglePost.id\n    const arrayOfTags = aSinglePost.tags.split(' ')\n\n    const deletePost = async  () => {\n        if (window.confirm(\"Delete?\")) {\n            await httpClient.post(\"//127.0.0.1:5000/deletepost\",{\n                postId\n            });\n\n\n        }\n    }\n    let userid;\n    if(user != null){\n     userid = user.id}\n    else{\n         userid=0;\n    }\n    const likePost = async () => {\n        await httpClient.post(\"//127.0.0.1:5000/likeapost\",{\n            postId,\n            userid\n\n        })\n        window.alert('Added to liked posts!')\n    }\n\n    return(\n        <div className=\"post\">\n            <div>\n                <span className=\"postTitle\" >{aSinglePost.title}</span>\n                <span className=\"postAuthor\">Created by {aSinglePost.authorName}</span>\n                <p className={\"postContent\"}>{aSinglePost.content} </p>\n                {arrayOfTags.map((tag) => {\n                    return(<p className={\"tags\"}>{tag}</p>)\n                })}\n                <p className={\"postDate\"}>{aSinglePost.date} </p>\n                {user.email != null ? (\n                    <i className=\"far fa-heart heart \" onClick={likePost}></i>\n                ):(<p></p>)}\n                {/*{aSinglePost.authorId === user.id ? (<i className=\"deletebtn far fa-trash-alt \" onClick={deletePost}/>)*/}\n                {/*    :*/}\n                {/*    (<p></p>)}*/}\n\n\n\n\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}